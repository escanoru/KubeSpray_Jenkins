---
- name: Updating ingress_nginx_enabled on inventory/mycluster/group_vars/k8s_cluster/addons.yml
  ansible.builtin.lineinfile:
    path: "{{ jenkins_workspace }}roles/tmp/kubespray/inventory/mycluster/group_vars/k8s_cluster/addons.yml"
    regexp: "^ingress_nginx_enabled: "
    line: "ingress_nginx_enabled: {{ ingress_nginx_enabled }}"
  when: ingress_nginx_enabled == true

- name: Updating ingress_nginx_host_network on inventory/mycluster/group_vars/k8s_cluster/addons.yml
  ansible.builtin.lineinfile:
    path: "{{ jenkins_workspace }}roles/tmp/kubespray/inventory/mycluster/group_vars/k8s_cluster/addons.yml"
    regexp: "^# ingress_nginx_host_network: "
    line: "ingress_nginx_host_network: {{ ingress_nginx_enabled }}"
  when: ingress_nginx_enabled == true

- name: Updating helm_enabled on inventory/mycluster/group_vars/k8s_cluster/addons.yml
  ansible.builtin.lineinfile:
    path: "{{ jenkins_workspace }}roles/tmp/kubespray/inventory/mycluster/group_vars/k8s_cluster/addons.yml"
    regexp: "^helm_enabled: "
    line: "helm_enabled: {{ helm_enabled }}"
  when: helm_enabled == true

- name: Updating metrics_server_enabled on inventory/mycluster/group_vars/k8s_cluster/addons.yml
  ansible.builtin.lineinfile:
    path: "{{ jenkins_workspace }}roles/tmp/kubespray/inventory/mycluster/group_vars/k8s_cluster/addons.yml"
    regexp: "^metrics_server_enabled: "
    line: "metrics_server_enabled: {{ metrics_server_enabled }}"
  when: metrics_server_enabled == true
